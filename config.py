import os
from dotenv import load_dotenv

# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env —Ñ–∞–π–ª–∞
load_dotenv()

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram –±–æ—Ç–∞
BOT_TOKEN = os.getenv('BOT_TOKEN')

# –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
ENCRYPTION_KEY = os.getenv('ENCRYPTION_KEY')

# –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
DEBUG = os.getenv('DEBUG', 'False') == 'True'

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
DATABASE_PATH = 'database/bot.db'

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ IMAP (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ—á—Ç–æ–π)
IMAP_SETTINGS = {
    'gmail': {
        'server': 'imap.gmail.com',
        'port': 993
    },
    'yandex': {
        'server': 'imap.yandex.ru',
        'port': 993
    },
    'mail.ru': {
        'server': 'imap.mail.ru',
        'port': 993
    },
    'outlook': {
        'server': 'outlook.office365.com',
        'port': 993
    }
}

# –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–∏—Å–∫–∞ 2FA –∫–æ–¥–æ–≤
# –ò—â–µ—Ç 6-8 —Ü–∏—Ñ—Ä –ø–æ–¥—Ä—è–¥
CODE_REGEX = r'\b\d{6,8}\b'

# –õ–∏–º–∏—Ç—ã
MAX_CODE_AGE_MINUTES = 10  # –ö–æ–¥—ã —Å—Ç–∞—Ä—à–µ 10 –º–∏–Ω—É—Ç –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º
MAX_EMAILS_TO_CHECK = 3    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ 3 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–∏—Å—å–º–∞
REQUEST_TIMEOUT_MINUTES = 5  # –ó–∞–ø—Ä–æ—Å –¥–æ—Å—Ç—É–ø–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 5 –º–∏–Ω—É—Ç

# –¢–µ–∫—Å—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π (–º–æ–∂–Ω–æ –ø–æ—Ç–æ–º –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª)
MESSAGES = {
    'start': (
        "üëã –ü—Ä–∏–≤–µ—Ç! –Ø –ø–æ–º–æ–≥—É –ø–æ–ª—É—á–∞—Ç—å 2FA –∫–æ–¥—ã –∫–æ–ª–ª–µ–≥.\n\n"
        "üìù –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:\n"
        "/register - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ—á—Ç—É\n"
        "/request_access - –ó–∞–ø—Ä–æ—Å–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–æ–¥–∞–º –∫–æ–ª–ª–µ–≥–∏\n"
        "/get_code - –ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥ –æ—Ç –∫–æ–ª–ª–µ–≥–∏\n"
        "/my_permissions - –ú–æ–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è\n"
        "/help - –ü–æ–º–æ—â—å"
    ),
    'register_start': (
        "üìß –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ—á—Ç—ã\n\n"
        "–ú–Ω–µ –Ω—É–∂–Ω—ã –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–≤–æ–µ–π –ø–æ—á—Ç–µ:\n"
        "1. Email –∞–¥—Ä–µ—Å\n"
        "2. –ü–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–Ω–µ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ä–æ–ª—å!)\n\n"
        "‚ùì –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?\n"
        "Gmail: https://myaccount.google.com/apppasswords\n"
        "Yandex: https://id.yandex.ru/security/app-passwords\n\n"
        "–û—Ç–ø—Ä–∞–≤—å –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:\n"
        "<code>email@example.com –ø–∞—Ä–æ–ª—å_–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</code>"
    ),
    'not_registered': (
        "‚ùå –¢—ã –µ—â—ë –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω!\n"
        "–ò—Å–ø–æ–ª—å–∑—É–π /register –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏."
    ),
}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
if not BOT_TOKEN:
    raise ValueError("‚ùå BOT_TOKEN –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ .env —Ñ–∞–π–ª–µ!")

if not ENCRYPTION_KEY:
    raise ValueError("‚ùå ENCRYPTION_KEY –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ .env —Ñ–∞–π–ª–µ!")

print("‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ")